<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top">
  <a class="navbar-brand text-white d-flex align-items-center" href="">
    <img src="assets/brain_morado.png" alt="Logo" width="150" height="60" class="d-inline-block align-text-top">
  </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
    aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavDropdown">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/admin"> Inicio <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          Administrar </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <a class="dropdown-item" href="/docente">Docentes</a>
          <a class="dropdown-item" href="/estudiante"> Estudiantes</a>
          <a class="dropdown-item" href="/grado"> Grado </a>
          <a class="dropdown-item" href="/periodo"> Periodo </a>
          <a class="dropdown-item" href="/matricula"> Matrícula </a>
          <a class="dropdown-item" href="/actividades"> Tipo de Actividad </a>
          <a class="dropdown-item" href="/asignatura"> Asignatura </a>
          <a class="dropdown-item" href="/actividades-educativas"> Actividades Educativas </a>
          <a class="dropdown-item" href="/periodo-calificaciones"> Periodo de Calificaciones </a>
          <a class="dropdown-item" href="/nota"> Calificaciones </a>
        </div>
      </li>
    </ul>
  </div>
</nav>

<h1 class=""> Calificaciones </h1>

<!-- Ajusta el código del HTML para utilizar correctamente las opciones -->
<div class="col-md-6 mb-3">
  <label for="periodo" class="form-label">Asignatura</label>
  <select class="form-select" id="asignaturaId" [(ngModel)]="selectedAsignaturaId" name="asignaturaId"
    (change)="onAsignaturaSelected()" required>
    <option *ngFor="let asignatura of asignaturas" [value]="asignatura.id">{{ asignatura.nombreMateria }} </option>
  </select>
</div>

<div class="col-md-6 mb-3">
  <label for="periodo" class="form-label">Actividad</label>
  <select class="form-select" id="actividadId" [(ngModel)]="selectedActividadId" name="actividadId"
    (change)="onActividadSelected()" required>
    <option *ngFor="let actividad of actividades" [value]="actividad.id">{{ actividad.titulo }} </option>
  </select>
</div>

<!-- Agrega esto donde quieras mostrar los resultados -->
<table class="table" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
  <thead>
    <tr>
      <th>personaID</th>
      <th>Nombre</th>
      <th>Apellido</th>
      <th>idActividad</th>
      <th>idAsignatura</th>
      <th>id_nota</th>
      <th>Nota</th>

      <th>Nombre asignatura</th>

    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let result of datosfinales">
      <td>{{ result.idPersona }}</td>
      <td>{{ result.nombre }}</td>
      <td>{{ result.apellido }}</td>
      <td>{{ result.idActividad }}</td>
      <td>{{ result.idAsignatura }}</td>
      <td>{{ result.idNota}}</td>
      <td>{{ result.nota}}</td>
      <td>{{ result.nombreAsignatura}}</td>

      <td>
        <button type="button" class="btn btn-primary" id="btn-g" (click)="editarNotas(result)">Editar</button>
      </td>

    </tr>
  </tbody>
</table>

<!-- modal para abrir con un input y actualizar la nota -->
<!-- Modal de Edición -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Asignar Nota</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
          (click)="closeEditPeriodoModal()"></button>
      </div>
      <div class="modal-body">
        <form #periodoForm2="ngForm">
          <!-- Campo de ID oculto -->
          <input type="hidden" [(ngModel)]="notaService.selectNotas.id" name="id" />
          <input type="hidden" [(ngModel)]="notaService.selectNotas.personaId" name="id" />


          <div class="row">

            <input type="hidden" [(ngModel)]="notaService.selectNotas.personaId" name="id" />
            <input type="hidden" [(ngModel)]="notaService.selectNotas.id" name="id" />
            <input type="hidden" [(ngModel)]="notaService.selectDTO.id_nota" name="id" />

            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="id" class="form-label">Nombre del Estudiante:</label>
                <input id="id" class="form-control" type="text" formControlName="nombre"
                  [value]="formulario.get('nombre')?.value" [attr.disabled]="true">
              </div>
              <div class="col-md-6 mb-3">
                <label for="actId" class="form-label">Actividad</label>
                <input id="actId" class="form-control" type="text" formControlName="titulo"
                  [value]="formulario.get('actividadEducativaTitulo')?.value" [attr.disabled]="true"
                  [ngModel]="notaService.selectDTO.IdActividad" name="actId">
              </div>
              <div class="col-md-6 mb-3">
                <label for="direccion" class="form-label">Direccion</label>
                <input id="direccion" class="form-control" type="text" [attr.disabled]="true"
                  [(ngModel)]="notaService.selectDTO.direccion" name="id">

              </div>

              <div class="col-md-6 mb-3">
                <label for="direccion" class="form-label">Nota</label>
                <input id="valor_nota" type="text" class="form-control" [(ngModel)]="notaService.seleccionarDto.nota"
                  name="valor_nota" />
              </div>
            </div>

          </div>
          <!-- Botón de guardar en el modal de edición -->
          <!-- <button type="button" class="btn btn-primary"
                      (click)="">Guardar</button> -->
          <!-- Ajusta según la ubicación y contexto en tu HTML -->
          <!-- Agrega esto al final de tu formulario dentro del modal -->
          <div class="row">
            <div class="col-md-12">
              <button type="button" class="btn btn-primary"
                (click)="asignarNota(notaService.seleccionarDto.idNota, notaService.seleccionarDto.nota)">
                Asignar Nota
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>



<br> <br><br> <br><br>
<!-- ICONS -->
<link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="footer-col">
                <h4>company</h4>
                <ul>
                    <li><a href="#">about us</a></li>
                    <li><a href="#">our services</a></li>
                    <li><a href="#">privacy policy</a></li>
                    <li><a href="#">affiliate program</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>get help</h4>
                <ul>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">shipping</a></li>
                    <li><a href="#">returns</a></li>
                    <li><a href="#">order status</a></li>
                    <li><a href="#">payment options</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>online shop</h4>
                <ul>
                    <li><a href="#">watch</a></li>
                    <li><a href="#">bag</a></li>
                    <li><a href="#">shoes</a></li>
                    <li><a href="#">dress</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>follow us</h4>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
                <img src="assets/brain_blanco.png" alt="Logo" width="80" height="80"
                    class="d-inline-block align-text-top">
            </div>
        </div>
    </div>
</footer>